@tailwind base;
@tailwind components;
@tailwind utilities;

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap');

:root {
  /* Colores base mejorados */
  --background: #ffffff;
  --foreground: #0f172a;
  --card: #ffffff;
  --card-foreground: #0f172a;
  --popover: #ffffff;
  --popover-foreground: #0f172a;
  
  /* Colores primarios con gradientes */
  --primary: #3b82f6;
  --primary-foreground: #ffffff;
  --primary-hover: #2563eb;
  --primary-light: #dbeafe;
  --primary-gradient: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
  
  /* Colores secundarios */
  --secondary: #f1f5f9;
  --secondary-foreground: #0f172a;
  --secondary-hover: #e2e8f0;
  
  /* Colores de acento para data visualization */
  --accent-1: #10b981; /* Verde energía */
  --accent-2: #f59e0b; /* Amarillo potencia */
  --accent-3: #ef4444; /* Rojo alertas */
  --accent-4: #8b5cf6; /* Púrpura combinado */
  --accent-5: #06b6d4; /* Cyan secundario */
  
  /* Grises semánticos */
  --muted: #f8fafc;
  --muted-foreground: #64748b;
  --border: #e2e8f0;
  --input: #e2e8f0;
  --ring: #3b82f6;
  
  /* Estados y feedback */
  --success: #10b981;
  --success-foreground: #ffffff;
  --warning: #f59e0b;
  --warning-foreground: #ffffff;
  --error: #ef4444;
  --error-foreground: #ffffff;
  --info: #3b82f6;
  --info-foreground: #ffffff;
  
  /* Sombras y efectos */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  
  /* Efectos glassmorphism */
  --glass-bg: rgba(255, 255, 255, 0.05);
  --glass-border: rgba(255, 255, 255, 0.1);
  --glass-blur: blur(10px);
  
  /* Radiuses */
  --radius-sm: 0.375rem;
  --radius: 0.5rem;
  --radius-md: 0.75rem;
  --radius-lg: 1rem;
  --radius-xl: 1.5rem;
}

.dark {
  /* Colores base oscuros */
  --background: #020617;
  --foreground: #f8fafc;
  --card: #0f172a;
  --card-foreground: #f8fafc;
  --popover: #0f172a;
  --popover-foreground: #f8fafc;
  
  /* Primarios en modo oscuro */
  --primary: #3b82f6;
  --primary-foreground: #f8fafc;
  --primary-hover: #2563eb;
  --primary-light: #1e3a8a;
  --primary-gradient: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
  
  /* Secundarios oscuros */
  --secondary: #1e293b;
  --secondary-foreground: #f8fafc;
  --secondary-hover: #334155;
  
  /* Grises oscuros */
  --muted: #1e293b;
  --muted-foreground: #94a3b8;
  --border: #334155;
  --input: #334155;
  --ring: #3b82f6;
  
  /* Efectos glassmorphism oscuro */
  --glass-bg: rgba(15, 23, 42, 0.8);
  --glass-border: rgba(148, 163, 184, 0.1);
  
  /* Sombras oscuras */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.2);
  --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.3), 0 1px 2px 0 rgba(0, 0, 0, 0.2);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2);
  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.4), 0 10px 10px -5px rgba(0, 0, 0, 0.3);
}

body {
  color: var(--foreground);
  background: var(--background);
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Utility classes para animaciones suaves */
.animate-fade-in {
  animation: fadeIn 0.5s ease-out;
}

.animate-slide-up {
  animation: slideUp 0.3s ease-out;
}

.animate-scale-in {
  animation: scaleIn 0.2s ease-out;
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideUp {
  from { 
    opacity: 0; 
    transform: translateY(10px); 
  }
  to { 
    opacity: 1; 
    transform: translateY(0); 
  }
}

@keyframes scaleIn {
  from { 
    opacity: 0; 
    transform: scale(0.95); 
  }
  to { 
    opacity: 1; 
    transform: scale(1); 
  }
}

/* Pulse animation para loading states */
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.animate-pulse-custom {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* Glassmorphism utility */
.glass {
  background: var(--glass-bg);
  backdrop-filter: var(--glass-blur);
  border: 1px solid var(--glass-border);
}

/* Gradient text */
.gradient-text {
  background: var(--primary-gradient);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

/* ===== APPLE-STYLE TOUCH INTERACTIONS ===== */
.apple-touch-active {
  transform: scale(0.95);
  opacity: 0.8;
  transition: transform 0.1s ease-out, opacity 0.1s ease-out;
}

.apple-touch-button {
  transform: scale(1);
  transition: transform 0.15s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  will-change: transform;
}

.apple-touch-button:active {
  transform: scale(0.95);
}

.apple-touch-card {
  transform: scale(1) translateY(0);
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  will-change: transform, box-shadow;
}

.apple-touch-card:active {
  transform: scale(0.98) translateY(1px);
  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
}

/* Haptic feedback simulation */
.apple-haptic-light {
  animation: hapticLight 0.1s ease-out;
}

.apple-haptic-medium {
  animation: hapticMedium 0.15s ease-out;
}

.apple-haptic-heavy {
  animation: hapticHeavy 0.2s ease-out;
}

@keyframes hapticLight {
  0% { transform: scale(1); }
  50% { transform: scale(1.02); }
  100% { transform: scale(1); }
}

@keyframes hapticMedium {
  0% { transform: scale(1); }
  25% { transform: scale(1.03); }
  75% { transform: scale(0.98); }
  100% { transform: scale(1); }
}

@keyframes hapticHeavy {
  0% { transform: scale(1); }
  25% { transform: scale(1.05); }
  50% { transform: scale(0.95); }
  75% { transform: scale(1.02); }
  100% { transform: scale(1); }
}

/* Pull to refresh indicator */
.apple-pull-refresh {
  transform: translateY(var(--pull-distance, 0px)) rotate(var(--pull-rotation, 0deg));
  transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  will-change: transform;
}

/* Swipe navigation indicators */
.apple-swipe-indicator {
  opacity: var(--swipe-opacity, 0);
  transform: translateX(var(--swipe-offset, 0px)) scale(var(--swipe-scale, 0.8));
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  will-change: opacity, transform;
}

/* Elastic scroll boundaries */
.apple-elastic-scroll {
  overscroll-behavior: none;
  -webkit-overflow-scrolling: touch;
}

/* iOS-style momentum scrolling */
.apple-momentum-scroll {
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
  overscroll-behavior-y: bounce;
}

/* Touch-friendly focus styles */
.apple-focus-ring:focus-visible {
  outline: 2px solid var(--apple-blue);
  outline-offset: 2px;
  border-radius: 8px;
}

/* Prevent text selection on touch interactions */
.apple-no-select {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
  -webkit-tap-highlight-color: transparent;
}

/* Enhanced touch targets for accessibility */
.apple-touch-target {
  min-height: 44px;
  min-width: 44px;
  position: relative;
}

.apple-touch-target::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  min-height: 44px;
  min-width: 44px;
  border-radius: inherit;
}

/* Safe area support for notched devices */
.apple-safe-area-top {
  padding-top: env(safe-area-inset-top);
}

.apple-safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}

.apple-safe-area-left {
  padding-left: env(safe-area-inset-left);
}

.apple-safe-area-right {
  padding-right: env(safe-area-inset-right);
}

.apple-safe-area-inset {
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* Dynamic island aware spacing */
@supports (top: env(safe-area-inset-top)) {
  .apple-dynamic-island-safe {
    margin-top: max(env(safe-area-inset-top), 20px);
  }
}
/* Test auto-deploy */

/* ===== ESTILOS PARA LEAFLET ===== */
.leaflet-container {
  height: 100%;
  width: 100%;
  z-index: 0;
  font-family: inherit;
}

/* Fix para iconos personalizados */
.custom-div-icon {
  background: none !important;
  border: none !important;
}

/* Estilos mejorados para popups */
.leaflet-popup-content-wrapper {
  border-radius: 8px;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  border: 1px solid #e5e7eb;
}

.leaflet-popup-content {
  margin: 8px 12px;
  font-family: inherit;
  line-height: 1.4;
  font-size: 14px;
}

.leaflet-popup-tip {
  background: white;
  border: 1px solid #e5e7eb;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Animaciones para marcadores */
.custom-div-icon div {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.custom-div-icon:hover div {
  transform: scale(1.1);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

/* Controles del mapa mejorados */
.leaflet-control-zoom {
  border: none !important;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
}

.leaflet-control-zoom a {
  background-color: white !important;
  border: 1px solid #e2e8f0 !important;
  color: #374151 !important;
  font-weight: bold !important;
  transition: all 0.2s ease !important;
}

.leaflet-control-zoom a:hover {
  background-color: #f8fafc !important;
  border-color: #cbd5e1 !important;
  transform: scale(1.05);
}

/* Atribución mejorada */
.leaflet-control-attribution {
  background: rgba(255, 255, 255, 0.9) !important;
  font-size: 10px !important;
  border-radius: 4px !important;
}

/* ===== ESTILOS RESPONSIVOS ===== */
@media (max-width: 768px) {
  .leaflet-popup-content-wrapper {
    max-width: 250px;
  }
  
  .leaflet-popup-content {
    margin: 6px 8px;
    font-size: 12px;
  }
  
  .leaflet-control-zoom a {
    width: 35px !important;
    height: 35px !important;
    line-height: 35px !important;
  }
}

/* ===== TEMA OSCURO ===== */
@media (prefers-color-scheme: dark) {
  .leaflet-popup-content-wrapper {
    background: #374151;
    color: #f9fafb;
    border-color: #4b5563;
  }
  
  .leaflet-popup-tip {
    background: #374151;
    border-color: #4b5563;
  }
  
  .leaflet-control-zoom a {
    background-color: #374151 !important;
    border-color: #4b5563 !important;
    color: #f9fafb !important;
  }
  
  .leaflet-control-zoom a:hover {
    background-color: #4b5563 !important;
    border-color: #6b7280 !important;
  }
  
  .leaflet-control-attribution {
    background: rgba(55, 65, 81, 0.9) !important;
    color: #f9fafb !important;
  }
}

/* ===== LOADING Y ESTADOS ===== */
.map-loading {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(248, 250, 252, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  border-radius: 8px;
}

/* ===== FIXES ADICIONALES ===== */
.leaflet-marker-icon {
  margin-left: -12px !important;
  margin-top: -41px !important;
}

.leaflet-div-icon {
  background: transparent !important;
  border: none !important;
}

/* ===== MEJORAS DE PERFORMANCE ===== */
.leaflet-zoom-anim .leaflet-zoom-animated {
  will-change: transform;
}

.custom-div-icon div {
  will-change: transform;
}

/* ===== ESTILOS PARA LA LEYENDA ===== */
.map-legend {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border: 1px solid #e5e7eb;
}

@media (prefers-color-scheme: dark) {
  .map-legend {
    background: rgba(55, 65, 81, 0.95);
    border-color: #4b5563;
    color: #f9fafb;
  }
}